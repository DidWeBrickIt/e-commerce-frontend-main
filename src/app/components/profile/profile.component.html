<app-navbar></app-navbar>
<app-error-popup *ngIf="hasError" [errorMessage]="errorMessage"></app-error-popup>
<div>
<ng-container *ngIf="profile$ | async as profile">
  <div class="title">
    <div class="title-text">
      <h1>Welcome, {{ profile.user.firstName }}!</h1>
    </div>
</div>
  <div class="container profile-container">
    <div class="row">
      <div class="col-4">
        <div>
            <app-profile-pic
                    *ngIf="profile$ | async as profile"
            [item]="profile.user.imageurl"
            (newPicEvent)="updatePic($event)"
            >
          </app-profile-pic>

            <app-user
                    *ngIf="profile$ | async as profile"
              [user]="profile.user"
              (newUserEvent)="updateUser($event)"
            ></app-user>
        </div>
      </div>
      <div class="col-6 rightColumn">
        <div class="d-flex">
          <button class="tn btn-primary mb-4 alignRight" (click)="updateProfile()">Save All Changes</button>
        </div>
          <app-address 
                  *ngIf="profile$ | async as profile"
            [address]="profile.address"
            (newAddressEvent)="updateAddress($event)"
          ></app-address>
      </div>
    </div>
  </div>
</ng-container>
</div>