<app-navbar></app-navbar>
<app-error-popup *ngIf="hasError" [errorMessage]="errorMessage"></app-error-popup>
<ng-container *ngIf="profile$ | async as profile">
  <h3>Welcome, {{ profile.user.firstName }}!</h3>

  <div class="container">
    <div class="row">
      <div class="col-4">
        <div class="temp-border">
            <app-profile-pic
                    *ngIf="profile$ | async as profile"
            [item]="profile.user.imageurl"
            (newPicEvent)="updatePic($event)"
            >
          </app-profile-pic>
            <app-user
                    *ngIf="profile$ | async as profile"
              [user]="profile.user"
              (newUserEvent)="updateUser($event)"
            ></app-user>
        </div>
      </div>
      <div class="col-6">
          <app-address
                  *ngIf="profile$ | async as profile"
            [address]="profile.address"
            (newAddressEvent)="updateAddress($event)"
          ></app-address>
        <hr />
          <app-payment
                  *ngIf="profile$ | async as profile"
            [payment]="profile.payment"
            (newPaymentEvent)="updatePayment($event)"
          ></app-payment>
        <hr />

<!--        <ng-container *ngIf="profile"> -->
<!--        <app-change-password-->
<!--          [passwordCred]="passwordCred"-->
<!--          (newPasswordEvent)="changePassword($event)"-->
<!--        ></app-change-password>-->
<!--        </ng-container> -->
      </div>
    </div>
    <div class="d-flex justify-content-center">
      <button mat-button (click)="updateProfile()">Save All Changes</button>
    </div>
  </div>
</ng-container>
