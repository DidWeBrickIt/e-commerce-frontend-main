{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/timot/OneDrive/Desktop/VSCode Stuff/e-commerce-frontend-main/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/product.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\n\nfunction ProductCardComponent_select_18_option_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const num_r4 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(num_r4);\n  }\n}\n\nfunction ProductCardComponent_select_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"select\", 12);\n    i0.ɵɵlistener(\"ngModelChange\", function ProductCardComponent_select_18_Template_select_ngModelChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.amount = $event);\n    });\n    i0.ɵɵelementStart(1, \"option\", 13);\n    i0.ɵɵtext(2, \"Select Amount\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, ProductCardComponent_select_18_option_3_Template, 2, 1, \"option\", 14);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.amount);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngValue\", 0)(\"disabled\", true)(\"selected\", true)(\"hidden\", true);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.quantities);\n  }\n}\n\nfunction ProductCardComponent_button_19_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function ProductCardComponent_button_19_Template_button_click_0_listener($event) {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.addToCart(ctx_r7.productInfo, $event));\n    });\n    i0.ɵɵtext(1, \"Add to Cart\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ProductCardComponent_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵlistener(\"click\", function ProductCardComponent_div_20_Template_div_click_0_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.toggleInfo());\n    });\n    i0.ɵɵelementStart(1, \"div\", 17);\n    i0.ɵɵlistener(\"click\", function ProductCardComponent_div_20_Template_div_click_1_listener($event) {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.stopProp($event));\n    });\n    i0.ɵɵelementStart(2, \"button\", 18);\n    i0.ɵɵlistener(\"click\", function ProductCardComponent_div_20_Template_button_click_2_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.toggleInfo());\n    });\n    i0.ɵɵtext(3, \"X\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(4, \"img\", 19);\n    i0.ɵɵelementStart(5, \"h5\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"p\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function ProductCardComponent_div_20_Template_button_click_11_listener($event) {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.addToCart(ctx_r13.productInfo, $event));\n    });\n    i0.ɵɵtext(12, \"Add to Cart\");\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"src\", ctx_r2.productInfo.image, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r2.productInfo.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r2.productInfo.description);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Product quantity: \", ctx_r2.productInfo.quantity, \"\");\n  }\n}\n\nexport class ProductCardComponent {\n  constructor(productService) {\n    this.productService = productService;\n    this.products = [];\n    this.totalPrice = 0;\n    this.showInfo = false;\n    this.quantities = [];\n    this.amount = 0;\n  }\n\n  ngOnInit() {\n    this.updateQuantity(this.productInfo.quantity);\n    this.subscription = this.productService.getCart().subscribe(cart => {\n      this.cartCount = cart.cartCount;\n      this.products = cart.products;\n      this.totalPrice = cart.totalPrice;\n    });\n  }\n\n  updateQuantity(num) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.quantities = [];\n      _this.amount = 0;\n\n      for (let i = 1; i < num + 1; i++) {\n        _this.quantities.push(i);\n      }\n\n      console.log(yield _this.productService.getProducts());\n    })();\n  }\n\n  addToCart(product, ev) {\n    ev.stopPropagation();\n    let inCart = false;\n    this.products.forEach(element => {\n      if (element.product == product) {\n        element.quantity = +element.quantity + +this.amount;\n        let cart = {\n          cartCount: +this.cartCount + +this.amount,\n          products: this.products,\n          totalPrice: this.totalPrice + product.price * this.amount\n        };\n        this.productService.setCart(cart);\n        this.updateQuantity(this.productInfo.quantity - element.quantity);\n        inCart = true;\n        return;\n      }\n\n      ;\n    });\n\n    if (inCart == false) {\n      let newProduct = {\n        product: product,\n        quantity: this.amount\n      };\n      this.products.push(newProduct);\n      let cart = {\n        cartCount: +this.cartCount + +this.amount,\n        products: this.products,\n        totalPrice: this.totalPrice + product.price * this.amount\n      };\n      this.productService.setCart(cart);\n      this.updateQuantity(this.productInfo.quantity - newProduct.quantity);\n    }\n  }\n\n  toggleInfo() {\n    this.showInfo = !this.showInfo;\n  }\n\n  stopProp(ev) {\n    ev.stopPropagation();\n  }\n\n  ngOnDestroy() {\n    this.subscription.unsubscribe();\n  }\n\n}\n\nProductCardComponent.ɵfac = function ProductCardComponent_Factory(t) {\n  return new (t || ProductCardComponent)(i0.ɵɵdirectiveInject(i1.ProductService));\n};\n\nProductCardComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ProductCardComponent,\n  selectors: [[\"app-product-card\"]],\n  inputs: {\n    productInfo: \"productInfo\"\n  },\n  decls: 21,\n  vars: 8,\n  consts: [[1, \"card\", 2, \"width\", \"18rem\", 3, \"click\"], [\"alt\", \"Card image cap\", 1, \"card-img-top\", 3, \"src\"], [1, \"card-body\"], [1, \"card-title\"], [1, \"card-text\"], [1, \"input-group\", \"input-group-sm\", \"mb-3\"], [1, \"input-group-prepend\"], [\"id\", \"inputGroup-sizing-sm\", 1, \"input-group-text\"], [\"type\", \"number\", \"aria-label\", \"Sizing example input\", \"aria-describedby\", \"inputGroup-sizing-sm\", \"disabled\", \"\", 1, \"form-control\", 3, \"value\"], [\"required\", \"\", 3, \"ngModel\", \"ngModelChange\", 4, \"ngIf\"], [\"class\", \"btn btn-outline-success\", 3, \"click\", 4, \"ngIf\"], [\"id\", \"infoBackground\", 3, \"click\", 4, \"ngIf\"], [\"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [3, \"ngValue\", \"disabled\", \"selected\", \"hidden\"], [4, \"ngFor\", \"ngForOf\"], [1, \"btn\", \"btn-outline-success\", 3, \"click\"], [\"id\", \"infoBackground\", 3, \"click\"], [\"id\", \"infoContent\", 3, \"click\"], [\"id\", \"closeBtn\", 3, \"click\"], [\"id\", \"infoImg\", \"alt\", \"Extra Info Picture\", 3, \"src\"]],\n  template: function ProductCardComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵlistener(\"click\", function ProductCardComponent_Template_div_click_0_listener() {\n        return ctx.toggleInfo();\n      });\n      i0.ɵɵelement(1, \"img\", 1);\n      i0.ɵɵelementStart(2, \"div\", 2)(3, \"h5\", 3);\n      i0.ɵɵtext(4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"p\", 4);\n      i0.ɵɵtext(6);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(7, \"div\", 5)(8, \"div\", 6)(9, \"span\", 7);\n      i0.ɵɵtext(10, \"$\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(11, \"input\", 8);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"div\", 5)(13, \"div\", 6)(14, \"span\", 7);\n      i0.ɵɵtext(15, \"Quantity in Stock\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(16, \"input\", 8);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"div\", 2);\n      i0.ɵɵtemplate(18, ProductCardComponent_select_18_Template, 4, 6, \"select\", 9);\n      i0.ɵɵtemplate(19, ProductCardComponent_button_19_Template, 2, 0, \"button\", 10);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(20, ProductCardComponent_div_20_Template, 13, 4, \"div\", 11);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"src\", ctx.productInfo.image, i0.ɵɵsanitizeUrl);\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate(ctx.productInfo.name);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(ctx.productInfo.description);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"value\", ctx.productInfo.price);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"value\", ctx.productInfo.quantity);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.quantities.length !== 0);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.amount !== 0);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.showInfo);\n    }\n  },\n  dependencies: [i2.NgForOf, i2.NgIf, i3.NgSelectOption, i3.ɵNgSelectMultipleOption, i3.SelectControlValueAccessor, i3.NgControlStatus, i3.RequiredValidator, i3.NgModel],\n  styles: [\".card[_ngcontent-%COMP%] {\\r\\n    size: auto;\\r\\n    min-width: 275px;\\r\\n    max-width: 200px;\\r\\n    height: -moz-fit-content;\\r\\n    height: fit-content;\\r\\n    transition: .2s ease-out;\\r\\n  \\r\\n  }\\r\\n  \\r\\n  img[_ngcontent-%COMP%]\\r\\n  {\\r\\n    justify-content: center;\\r\\n    height: auto;\\r\\n    width: auto;\\r\\n    max-height: 200px;\\r\\n    max-width: 307px;\\r\\n    left:0;\\r\\n  }\\r\\n  \\r\\n  div[_ngcontent-%COMP%] {\\r\\n    position: relative;\\r\\n    transition: .2s ease-out;\\r\\n  }\\r\\n  \\r\\n  .card[_ngcontent-%COMP%]:hover{\\r\\n    box-shadow: 0 5px 10px rgba(0,0,0,.2);\\r\\n    transform: translate3d(0,-10px,0);\\r\\n  }\\r\\n  \\r\\n  #infoBackground[_ngcontent-%COMP%] {\\r\\n    position: fixed; \\r\\n    z-index: 1;\\r\\n    left: 0;\\r\\n    top: 0;\\r\\n    width: 100%;\\r\\n    height: 100%; \\r\\n    overflow: hidden;\\r\\n    background-color: rgb(0,0,0);\\r\\n    background-color: rgba(0,0,0,0.4);\\r\\n  }\\r\\n  \\r\\n  #infoContent[_ngcontent-%COMP%] {\\r\\n    position: relative;\\r\\n    z-index: 2;\\r\\n    background-color: #fefefe;\\r\\n    margin: 15% auto;\\r\\n    padding: 20px;\\r\\n    border: 1px solid #888;\\r\\n    width: 80%;\\r\\n    height: 50%;\\r\\n  }\\r\\n  \\r\\n  #closeBtn[_ngcontent-%COMP%] {\\r\\n    float: right;\\r\\n  }\\r\\n  \\r\\n  #infoImg[_ngcontent-%COMP%] {\\r\\n    float: left;\\r\\n  }\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb2R1Y3QtY2FyZC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksVUFBVTtJQUNWLGdCQUFnQjtJQUNoQixnQkFBZ0I7SUFDaEIsd0JBQW1CO0lBQW5CLG1CQUFtQjtJQUNuQix3QkFBd0I7O0VBRTFCOztFQUVBOztJQUVFLHVCQUF1QjtJQUN2QixZQUFZO0lBQ1osV0FBVztJQUNYLGlCQUFpQjtJQUNqQixnQkFBZ0I7SUFDaEIsTUFBTTtFQUNSOztFQUVBO0lBQ0Usa0JBQWtCO0lBQ2xCLHdCQUF3QjtFQUMxQjs7RUFFQTtJQUNFLHFDQUFxQztJQUNyQyxpQ0FBaUM7RUFDbkM7O0VBRUE7SUFDRSxlQUFlO0lBQ2YsVUFBVTtJQUNWLE9BQU87SUFDUCxNQUFNO0lBQ04sV0FBVztJQUNYLFlBQVk7SUFDWixnQkFBZ0I7SUFDaEIsNEJBQTRCO0lBQzVCLGlDQUFpQztFQUNuQzs7RUFFQTtJQUNFLGtCQUFrQjtJQUNsQixVQUFVO0lBQ1YseUJBQXlCO0lBQ3pCLGdCQUFnQjtJQUNoQixhQUFhO0lBQ2Isc0JBQXNCO0lBQ3RCLFVBQVU7SUFDVixXQUFXO0VBQ2I7O0VBRUE7SUFDRSxZQUFZO0VBQ2Q7O0VBRUE7SUFDRSxXQUFXO0VBQ2IiLCJmaWxlIjoicHJvZHVjdC1jYXJkLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuY2FyZCB7XHJcbiAgICBzaXplOiBhdXRvO1xyXG4gICAgbWluLXdpZHRoOiAyNzVweDtcclxuICAgIG1heC13aWR0aDogMjAwcHg7XHJcbiAgICBoZWlnaHQ6IGZpdC1jb250ZW50O1xyXG4gICAgdHJhbnNpdGlvbjogLjJzIGVhc2Utb3V0O1xyXG4gIFxyXG4gIH1cclxuICBcclxuICBpbWdcclxuICB7XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICAgIGhlaWdodDogYXV0bztcclxuICAgIHdpZHRoOiBhdXRvO1xyXG4gICAgbWF4LWhlaWdodDogMjAwcHg7XHJcbiAgICBtYXgtd2lkdGg6IDMwN3B4O1xyXG4gICAgbGVmdDowO1xyXG4gIH1cclxuICBcclxuICBkaXYge1xyXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gICAgdHJhbnNpdGlvbjogLjJzIGVhc2Utb3V0O1xyXG4gIH1cclxuICBcclxuICAuY2FyZDpob3ZlcntcclxuICAgIGJveC1zaGFkb3c6IDAgNXB4IDEwcHggcmdiYSgwLDAsMCwuMik7XHJcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZTNkKDAsLTEwcHgsMCk7XHJcbiAgfVxyXG5cclxuICAjaW5mb0JhY2tncm91bmQge1xyXG4gICAgcG9zaXRpb246IGZpeGVkOyBcclxuICAgIHotaW5kZXg6IDE7XHJcbiAgICBsZWZ0OiAwO1xyXG4gICAgdG9wOiAwO1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBoZWlnaHQ6IDEwMCU7IFxyXG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHJnYigwLDAsMCk7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsMCwwLDAuNCk7XHJcbiAgfVxyXG5cclxuICAjaW5mb0NvbnRlbnQge1xyXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gICAgei1pbmRleDogMjtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICNmZWZlZmU7XHJcbiAgICBtYXJnaW46IDE1JSBhdXRvO1xyXG4gICAgcGFkZGluZzogMjBweDtcclxuICAgIGJvcmRlcjogMXB4IHNvbGlkICM4ODg7XHJcbiAgICB3aWR0aDogODAlO1xyXG4gICAgaGVpZ2h0OiA1MCU7XHJcbiAgfVxyXG5cclxuICAjY2xvc2VCdG4ge1xyXG4gICAgZmxvYXQ6IHJpZ2h0O1xyXG4gIH1cclxuXHJcbiAgI2luZm9JbWcge1xyXG4gICAgZmxvYXQ6IGxlZnQ7XHJcbiAgfVxyXG4gICJdfQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","ProductCardComponent","constructor","productService","ngOnInit","updateQuantity","productInfo","quantity","subscription","getCart","subscribe","cart","cartCount","products","totalPrice","num","quantities","amount","i","push","console","log","getProducts","addToCart","product","ev","stopPropagation","inCart","forEach","element","price","setCart","newProduct","toggleInfo","showInfo","stopProp","ngOnDestroy","unsubscribe","selectors","inputs","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\timot\\OneDrive\\Desktop\\VSCode Stuff\\e-commerce-frontend-main\\src\\app\\components\\product-card\\product-card.component.html","C:\\Users\\timot\\OneDrive\\Desktop\\VSCode Stuff\\e-commerce-frontend-main\\src\\app\\components\\product-card\\product-card.component.ts"],"sourcesContent":["<div class=\"card\" style=\"width: 18rem;\" (click)=\"toggleInfo()\">\r\n    <img class=\"card-img-top\" [src]=\"productInfo.image\" alt=\"Card image cap\">\r\n    <div class=\"card-body\">\r\n      <h5 class=\"card-title\">{{productInfo.name}}</h5>\r\n      <p class=\"card-text\">{{productInfo.description}}</p>\r\n    </div>\r\n    <div class=\"input-group input-group-sm mb-3\">\r\n      <div class=\"input-group-prepend\">\r\n        <span class=\"input-group-text\" id=\"inputGroup-sizing-sm\">$</span>\r\n      </div>\r\n      <input type=\"number\" class=\"form-control\" aria-label=\"Sizing example input\" [value]=\"productInfo.price\" aria-describedby=\"inputGroup-sizing-sm\" disabled>\r\n    </div>\r\n    <div class=\"input-group input-group-sm mb-3\">\r\n        <div class=\"input-group-prepend\">\r\n          <span class=\"input-group-text\" id=\"inputGroup-sizing-sm\">Quantity in Stock</span>\r\n        </div>\r\n        <input type=\"number\" class=\"form-control\" aria-label=\"Sizing example input\" [value]=\"productInfo.quantity\" aria-describedby=\"inputGroup-sizing-sm\" disabled>\r\n      </div>\r\n    <div class=\"card-body\">\r\n        <select [(ngModel)] = \"amount\" required *ngIf = \"this.quantities.length !== 0\">\r\n          <option [ngValue]=\"0\" [disabled]=\"true\" [selected] = \"true\" [hidden] = \"true\">Select Amount</option>\r\n          <option *ngFor = \"let num of this.quantities\">{{num}}</option>\r\n        </select>\r\n        <button *ngIf = \"this.amount !== 0\" class=\"btn btn-outline-success\" (click)=\"addToCart(productInfo, $event)\">Add to Cart</button>\r\n    </div>\r\n  </div>\r\n  <div id=\"infoBackground\" *ngIf=\"showInfo\" (click)=\"toggleInfo()\">\r\n    <div id=\"infoContent\" (click)=\"stopProp($event)\">\r\n      <button id=\"closeBtn\" (click)=\"toggleInfo()\">X</button>\r\n      <img id=\"infoImg\" [src]=\"productInfo.image\" alt=\"Extra Info Picture\">\r\n      <h5>{{productInfo.name}}</h5>\r\n      <p>{{productInfo.description}}</p>\r\n      <p>Product quantity: {{productInfo.quantity}}</p>\r\n      <button class=\"btn btn-outline-success\" (click)=\"addToCart(productInfo, $event)\">Add to Cart</button>\r\n    </div>\r\n  </div>\r\n","import { Component, Input, OnInit } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\nimport { Product } from 'src/app/models/product';\r\nimport { ProductService } from 'src/app/services/product.service';\r\n\r\n@Component({\r\n  selector: 'app-product-card',\r\n  templateUrl: './product-card.component.html',\r\n  styleUrls: ['./product-card.component.css']\r\n})\r\nexport class ProductCardComponent implements OnInit{\r\n\r\n  cartCount!: number;\r\n  products: {\r\n    product: Product,\r\n    quantity: number\r\n  }[] = [];\r\n  subscription!: Subscription;\r\n  totalPrice: number = 0;\r\n  showInfo: boolean = false;\r\n  quantities: number[] = [];\r\n  amount: number = 0;\r\n\r\n\r\n  @Input() productInfo!: Product;\r\n\r\n  constructor(private productService: ProductService) { }\r\n  \r\n  ngOnInit(): void {\r\n    this.updateQuantity(this.productInfo.quantity);\r\n    this.subscription = this.productService.getCart().subscribe(\r\n      (cart) => {\r\n        this.cartCount = cart.cartCount;\r\n        this.products = cart.products;\r\n        this.totalPrice = cart.totalPrice;\r\n      }\r\n    );\r\n  }\r\n\r\n  async updateQuantity(num: number){\r\n    this.quantities = [];\r\n    this.amount = 0;\r\n    for(let i = 1; i < num + 1; i++){\r\n      this.quantities.push(i);\r\n    }\r\n    console.log(await this.productService.getProducts());\r\n  }\r\n\r\n  addToCart(product: Product, ev: Event): void {\r\n\r\n    ev.stopPropagation();\r\n    let inCart = false;\r\n\r\n    this.products.forEach(\r\n      (element) => {\r\n        if(element.product == product){\r\n          element.quantity = +element.quantity + +this.amount;\r\n          let cart = {\r\n            cartCount: +this.cartCount + +this.amount,\r\n            products: this.products,\r\n            totalPrice: this.totalPrice + (product.price * this.amount)\r\n          };\r\n          this.productService.setCart(cart);\r\n          this.updateQuantity(this.productInfo.quantity - element.quantity);\r\n          inCart=true;\r\n          return;\r\n        };\r\n      }\r\n    );\r\n\r\n    if(inCart == false){\r\n      let newProduct = {\r\n        product: product,\r\n        quantity: this.amount\r\n      };\r\n      this.products.push(newProduct);\r\n      let cart = {\r\n        cartCount: +this.cartCount + +this.amount,\r\n        products: this.products,\r\n        totalPrice: this.totalPrice + (product.price * this.amount)\r\n      }\r\n      this.productService.setCart(cart);\r\n      this.updateQuantity(this.productInfo.quantity - newProduct.quantity);\r\n    }\r\n      \r\n  }\r\n\r\n  toggleInfo() {\r\n    this.showInfo = !this.showInfo;\r\n  }\r\n\r\n  stopProp(ev: Event) {\r\n    ev.stopPropagation();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.subscription.unsubscribe();\r\n  }\r\n\r\n}\r\n"]},"metadata":{},"sourceType":"module"}